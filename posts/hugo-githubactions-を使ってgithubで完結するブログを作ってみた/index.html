<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hugo & GithubActions を使ってGitHubで完結するブログを作ってみた | ssss.tantalum's blog</title><meta name=keywords content="Tech,GitHub Actions,Hugo"><meta name=description content="このブログの技術とかそのへんについてまとめ"><meta name=author content="ssss.tantalum"><link rel=canonical href=https://ssss-tantalum.github.io/posts/hugo-githubactions-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6github%E3%81%A7%E5%AE%8C%E7%B5%90%E3%81%99%E3%82%8B%E3%83%96%E3%83%AD%E3%82%B0%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ed52a04cba0843fef8297e018b15e8a32a989ea4415133cb8bf77414d3815f7b.css integrity="sha256-7VKgTLoIQ/74KX4BixXooyqYnqRBUTPLi/d0FNOBX3s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ssss-tantalum.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://ssss-tantalum.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://ssss-tantalum.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://ssss-tantalum.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://ssss-tantalum.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Hugo & GithubActions を使ってGitHubで完結するブログを作ってみた"><meta property="og:description" content="このブログの技術とかそのへんについてまとめ"><meta property="og:type" content="article"><meta property="og:url" content="https://ssss-tantalum.github.io/posts/hugo-githubactions-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6github%E3%81%A7%E5%AE%8C%E7%B5%90%E3%81%99%E3%82%8B%E3%83%96%E3%83%AD%E3%82%B0%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F/"><meta property="og:image" content="https://ssss-tantalum.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-23T14:00:00+09:00"><meta property="article:modified_time" content="2022-04-23T14:00:00+09:00"><meta property="og:site_name" content="ssss.tantalum's blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ssss-tantalum.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Hugo & GithubActions を使ってGitHubで完結するブログを作ってみた"><meta name=twitter:description content="このブログの技術とかそのへんについてまとめ"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ssss-tantalum.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Hugo \u0026 GithubActions を使ってGitHubで完結するブログを作ってみた","item":"https://ssss-tantalum.github.io/posts/hugo-githubactions-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6github%E3%81%A7%E5%AE%8C%E7%B5%90%E3%81%99%E3%82%8B%E3%83%96%E3%83%AD%E3%82%B0%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hugo \u0026 GithubActions を使ってGitHubで完結するブログを作ってみた","name":"Hugo \u0026 GithubActions を使ってGitHubで完結するブログを作ってみた","description":"このブログの技術とかそのへんについてまとめ","keywords":["Tech","GitHub Actions","Hugo"],"articleBody":"はじめに はじめまして。ヘボヘボWebエンジニアの ssss.tantalum (たんたる) と申します。\n以前から「ブログとかやってみたいなー」と思っていたのですが、ついに重い腰を上げました。\nが、ブログサービスとかに登録して記事を書くのがそれはまぁ面倒くさい。\nその時ふと「全部 GitHub で済まされへんのか？」と思い調べてみたら意外とできたので、その方法を書きます。\nGitHub の草がいっぱい生えるとモチベーションあがるしね。\nこの記事の内容は色々適当なので、あまり当てにしないでください。\n致命的に間違っている所があって、どうしても指摘したい場合、プルリクを投げていただけると幸いです。\n使用している技術  Hugo  Golang 製の静的サイトジェネレーター  パッと調べたら楽ちんそうだったので採用     GitHub  Issues  記事の作成   Pull Request  記事の最終確認 GitHub Pages にデプロイするときのフック   Actions  Issues → Pull Request の自動生成 Pull Request が main にマージされたら GitHub Pages にデプロイする      Hugo プロジェクトを作成する 参考: https://gohugo.io/getting-started/quick-start/\nhugo new site blog なんか適当に記事を作成して、リポジトリに上げる。\nhugo new posts/hello-world.md テーマの設定とかもお好みでよしなにやる。\nIssue から Pull Request を自動生成する GitHub Actions を利用して Issue から Pull Request を自動生成するように、リポジトリに .github/workflows/publish.yaml を作成する。\nname: Pushlish post from issue  on:  issues:  types: [labeled]  jobs:  build:  # issue のラベルが 'publish' だったら Actions を実行する  if: github.event.label.name == 'publish'  runs-on: ubuntu-latest  steps:  - uses: actions/checkout@v2   - name: Generate Post  env:  POST_TITLE: ${{ github.event.issue.title }}  POST_BODY: ${{ github.event.issue.body }}  # なんかうまいこと issue のタイトルでマークダウンファイルを作成し、issue の内容を突っ込む  # Hugoのデフォルト設定で content/posts 配下にマークダウンファイルを設置すると記事として読み込んでくれる  run: |cat  \"content/posts/${POST_TITLE}.md\" ${POST_BODY} EOF   - name: Create Pull Request  uses: peter-evans/create-pull-request@v3  with:  delete-branch: true  title: \"publish: ${{ github.event.issue.title }}\"  # この辺は参考記事をほぼ丸パクリなので自分なりにアレンジしてみる  body: |Automagically sprouted for publishing. Merging will publish to: https://ssss-tantalum.github.io/posts/${{ github.event.issue.title }} Closes #${{ github.event.issue.number }}  reviewers: \"${{ github.repository_owner }}\"  commit-message: \"post: ${{ github.event.issue.title }}\" こんな感じで作成してみる。\nすると…設定した GitHub Actions が走り…\nPull Request が作成されている。すごい。\nPull Request が main にマージされたら GitHub Pages にデプロイする main にマージされたことをフックに、Pull Request の内容を GitHub Pages にデプロイする。\n例の如く .github/workflows/gs-pages.yaml を作成する。\nname: github pages  on:  push:  branches:  - main  # Set a branch to deploy  jobs:  deploy:  runs-on: ubuntu-18.04  steps:  - uses: actions/checkout@v2  with:  submodules: true # Fetch Hugo themes (true OR recursive)  fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod   - name: Setup Hugo  uses: peaceiris/actions-hugo@v2  with:  hugo-version: 'latest'  extended: true   - name: Build  run: hugo --minify   - name: Deploy  uses: peaceiris/actions-gh-pages@v3  with:  deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }}  external_repository: ssss-tantalum/ssss-tantalum.github.io  publish_dir: ./public Pull Request をマージしてみると…\nデプロイしてくれてるみたい。嬉しい。\nちゃんと GitHub Pages にも反映されていますね。よかった。\n試しにやってみたけど、画像とかもちゃんと反映されてる。すごいやん。\n終わりに めちゃくちゃ適当にやってみましたが、意外となんとかなりました。\n全部 GitHub で完結するのはまじでありがたい。\n草もいっぱい生えて良き良き。\nなにかの参考・きっかけになれば幸いです。\n参考文献  https://gohugo.io/ https://hacknote.jp/archives/58054/ https://shazow.net/posts/github-issues-as-a-hugo-frontend/  ","wordCount":"289","inLanguage":"en","datePublished":"2022-04-23T14:00:00+09:00","dateModified":"2022-04-23T14:00:00+09:00","author":{"@type":"Person","name":"ssss.tantalum"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ssss-tantalum.github.io/posts/hugo-githubactions-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6github%E3%81%A7%E5%AE%8C%E7%B5%90%E3%81%99%E3%82%8B%E3%83%96%E3%83%AD%E3%82%B0%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F/"},"publisher":{"@type":"Organization","name":"ssss.tantalum's blog","logo":{"@type":"ImageObject","url":"https://ssss-tantalum.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ssss-tantalum.github.io/ accesskey=h title="ssss.tantalum's blog (Alt + H)">ssss.tantalum's blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://ssss-tantalum.github.io/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ssss-tantalum.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ssss-tantalum.github.io/posts/>Posts</a></div><h1 class=post-title>Hugo & GithubActions を使ってGitHubで完結するブログを作ってみた</h1><div class=post-description>このブログの技術とかそのへんについてまとめ</div><div class=post-meta><span title="2022-04-23 14:00:00 +0900 +0900">April 23, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;ssss.tantalum&nbsp;|&nbsp;<a href=https://github.com/ssss-tantalum/ssss-tantalum.github.io//tree/main/content/posts/Hugo%20&%20GithubActions%20%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6GitHub%e3%81%a7%e5%ae%8c%e7%b5%90%e3%81%99%e3%82%8b%e3%83%96%e3%83%ad%e3%82%b0%e3%82%92%e4%bd%9c%e3%81%a3%e3%81%a6%e3%81%bf%e3%81%9f.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e3%81%af%e3%81%98%e3%82%81%e3%81%ab aria-label=はじめに>はじめに</a></li><li><a href=#%e4%bd%bf%e7%94%a8%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b%e6%8a%80%e8%a1%93 aria-label=使用している技術>使用している技術</a></li><li><a href=#hugo-%e3%83%97%e3%83%ad%e3%82%b8%e3%82%a7%e3%82%af%e3%83%88%e3%82%92%e4%bd%9c%e6%88%90%e3%81%99%e3%82%8b aria-label="Hugo プロジェクトを作成する">Hugo プロジェクトを作成する</a></li><li><a href=#issue-%e3%81%8b%e3%82%89-pull-request-%e3%82%92%e8%87%aa%e5%8b%95%e7%94%9f%e6%88%90%e3%81%99%e3%82%8b aria-label="Issue から Pull Request を自動生成する">Issue から Pull Request を自動生成する</a></li><li><a href=#pull-request-%e3%81%8c-main-%e3%81%ab%e3%83%9e%e3%83%bc%e3%82%b8%e3%81%95%e3%82%8c%e3%81%9f%e3%82%89-github-pages-%e3%81%ab%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%81%99%e3%82%8b aria-label="Pull Request が main にマージされたら GitHub Pages にデプロイする">Pull Request が <code>main</code> にマージされたら GitHub Pages にデプロイする</a></li><li><a href=#%e7%b5%82%e3%82%8f%e3%82%8a%e3%81%ab aria-label=終わりに>終わりに</a></li><li><a href=#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae aria-label=参考文献>参考文献</a></li></ul></div></details></div><div class=post-content><h2 id=はじめに>はじめに<a hidden class=anchor aria-hidden=true href=#はじめに>#</a></h2><p>はじめまして。ヘボヘボWebエンジニアの ssss.tantalum (たんたる) と申します。<br>以前から「ブログとかやってみたいなー」と思っていたのですが、ついに重い腰を上げました。</p><p>が、ブログサービスとかに登録して記事を書くのがそれはまぁ面倒くさい。<br>その時ふと「全部 GitHub で済まされへんのか？」と思い調べてみたら意外とできたので、その方法を書きます。<br>GitHub の草がいっぱい生えるとモチベーションあがるしね。</p><p>この記事の内容は色々適当なので、あまり当てにしないでください。<br>致命的に間違っている所があって、どうしても指摘したい場合、プルリクを投げていただけると幸いです。</p><h2 id=使用している技術>使用している技術<a hidden class=anchor aria-hidden=true href=#使用している技術>#</a></h2><ul><li>Hugo<ul><li>Golang 製の静的サイトジェネレーター<ul><li>パッと調べたら楽ちんそうだったので採用</li></ul></li></ul></li><li>GitHub<ul><li>Issues<ul><li>記事の作成</li></ul></li><li>Pull Request<ul><li>記事の最終確認</li><li>GitHub Pages にデプロイするときのフック</li></ul></li><li>Actions<ul><li>Issues → Pull Request の自動生成</li><li>Pull Request が main にマージされたら GitHub Pages にデプロイする</li></ul></li></ul></li></ul><h2 id=hugo-プロジェクトを作成する>Hugo プロジェクトを作成する<a hidden class=anchor aria-hidden=true href=#hugo-プロジェクトを作成する>#</a></h2><p>参考: <a href=https://gohugo.io/getting-started/quick-start/>https://gohugo.io/getting-started/quick-start/</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo new site blog
</span></span></code></pre></div><p>なんか適当に記事を作成して、リポジトリに上げる。</p><pre tabindex=0><code>hugo new posts/hello-world.md
</code></pre><p>テーマの設定とかもお好みでよしなにやる。</p><h2 id=issue-から-pull-request-を自動生成する>Issue から Pull Request を自動生成する<a hidden class=anchor aria-hidden=true href=#issue-から-pull-request-を自動生成する>#</a></h2><p>GitHub Actions を利用して Issue から Pull Request を自動生成するように、リポジトリに <code>.github/workflows/publish.yaml</code> を作成する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Pushlish post from issue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>issues</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>types</span>: [<span style=color:#ae81ff>labeled]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># issue のラベルが &#39;publish&#39; だったら Actions を実行する</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.event.label.name == &#39;publish&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Generate Post</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>POST_TITLE</span>: <span style=color:#ae81ff>${{ github.event.issue.title }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>POST_BODY</span>: <span style=color:#ae81ff>${{ github.event.issue.body }}</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># なんかうまいこと issue のタイトルでマークダウンファイルを作成し、issue の内容を突っ込む</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Hugoのデフォルト設定で content/posts 配下にマークダウンファイルを設置すると記事として読み込んでくれる</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          cat &gt; &#34;content/posts/${POST_TITLE}.md&#34; &lt;&lt; EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ${POST_BODY}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          EOF</span>          
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Create Pull Request</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peter-evans/create-pull-request@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>delete-branch</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;publish: ${{ github.event.issue.title }}&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># この辺は参考記事をほぼ丸パクリなので自分なりにアレンジしてみる</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>body</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            Automagically sprouted for publishing.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            Merging will publish to: https://ssss-tantalum.github.io/posts/${{ github.event.issue.title }}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            Closes #${{ github.event.issue.number }}</span>            
</span></span><span style=display:flex><span>          <span style=color:#f92672>reviewers</span>: <span style=color:#e6db74>&#34;${{ github.repository_owner }}&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>commit-message</span>: <span style=color:#e6db74>&#34;post: ${{ github.event.issue.title }}&#34;</span>
</span></span></code></pre></div><p><img loading=lazy src=https://user-images.githubusercontent.com/103912715/164883774-eb7694c3-5be6-4393-938b-3b94b48c15a0.png alt="スクリーンショット 2022-04-23 15 54 13"></p><p>こんな感じで作成してみる。</p><p>すると&mldr;設定した GitHub Actions が走り&mldr;</p><p><img loading=lazy src=https://user-images.githubusercontent.com/103912715/164883838-ddb70f78-0081-443e-b353-1249ce6f6dc5.png alt="スクリーンショット 2022-04-23 15 54 54"></p><p>Pull Request が作成されている。すごい。</p><p><img loading=lazy src=https://user-images.githubusercontent.com/103912715/164883857-1ebeaaab-bfb5-46c5-8d26-504abab2950a.png alt="スクリーンショット 2022-04-23 15 55 36"></p><h2 id=pull-request-が-main-にマージされたら-github-pages-にデプロイする>Pull Request が <code>main</code> にマージされたら GitHub Pages にデプロイする<a hidden class=anchor aria-hidden=true href=#pull-request-が-main-にマージされたら-github-pages-にデプロイする>#</a></h2><p><code>main</code> にマージされたことをフックに、Pull Request の内容を GitHub Pages にデプロイする。</p><p>例の如く <code>.github/workflows/gs-pages.yaml</code> を作成する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>github pages</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>main </span> <span style=color:#75715e># Set a branch to deploy</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-18.04</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>deploy_key</span>: <span style=color:#ae81ff>${{ secrets.ACTIONS_DEPLOY_KEY }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>external_repository</span>: <span style=color:#ae81ff>ssss-tantalum/ssss-tantalum.github.io</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
</span></span></code></pre></div><p>Pull Request をマージしてみると&mldr;</p><p><img loading=lazy src=https://user-images.githubusercontent.com/103912715/164884052-c1f2db35-3e27-48fd-884c-a40ac63379b3.png alt="スクリーンショット 2022-04-23 16 01 36"></p><p>デプロイしてくれてるみたい。嬉しい。</p><p>ちゃんと GitHub Pages にも反映されていますね。よかった。</p><p><img loading=lazy src=https://user-images.githubusercontent.com/103912715/164884099-4cca9be8-c941-43a1-8d88-0d3a8ad3ad32.png alt="スクリーンショット 2022-04-23 16 02 36"></p><p>試しにやってみたけど、画像とかもちゃんと反映されてる。すごいやん。</p><h2 id=終わりに>終わりに<a hidden class=anchor aria-hidden=true href=#終わりに>#</a></h2><p>めちゃくちゃ適当にやってみましたが、意外となんとかなりました。<br>全部 GitHub で完結するのはまじでありがたい。<br>草もいっぱい生えて良き良き。</p><p>なにかの参考・きっかけになれば幸いです。</p><h2 id=参考文献>参考文献<a hidden class=anchor aria-hidden=true href=#参考文献>#</a></h2><ul><li><a href=https://gohugo.io/>https://gohugo.io/</a></li><li><a href=https://hacknote.jp/archives/58054/>https://hacknote.jp/archives/58054/</a></li><li><a href=https://shazow.net/posts/github-issues-as-a-hugo-frontend/>https://shazow.net/posts/github-issues-as-a-hugo-frontend/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://ssss-tantalum.github.io/tags/tech/>Tech</a></li><li><a href=https://ssss-tantalum.github.io/tags/github-actions/>GitHub Actions</a></li><li><a href=https://ssss-tantalum.github.io/tags/hugo/>Hugo</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://ssss-tantalum.github.io/>ssss.tantalum's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>